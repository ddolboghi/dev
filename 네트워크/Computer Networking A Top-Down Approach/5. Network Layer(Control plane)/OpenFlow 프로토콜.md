OpenFlow 프로토콜은 SDN 컨트롤러와 SDN 제어 스위치(또는 OpenFlow API를 구현하는 다른 장치) 간에 작동한다.
OpenFlow 프로토콜은 **TCP** 상에서 작동하며, 기본 포트 번호는 **6653**이다.
# 메시지 유형
## 컨트롤러 -> 스위치
- **Configuration**: 컨트롤러가 스위치의 구성 매개변수를 질의하고 설정할 수 있게 한다.
- **Modify-State**: 컨트롤러가 스위치의 플로우 테이블 항목을 추가/삭제/수정하고, 스위치 포트 속성을 설정하는 데 사용된다.
- **Read-State**: 컨트롤러가 스위치의 플로우 테이블과 포트에서 통계 및 카운터 값을 수집하는 데 사용된다.
- **Send-Packet:** 컨트롤러가 특정 패킷을 제어 대상 스위치의 지정된 포트를 통해 전송시키는 데 사용된다. 이 메시지 자체의 페이로드에 전송할 패킷이 포함된다.   
## 스위치 -> 컨트롤러
- **Flow-Removed**: 플로우 테이블 항목이 (e.g. 타임아웃 또는 수신된 `Modify-State` 메시지의 결과로) 제거되었음을 컨트롤러에 알리는 데 사용된다.
- **Port-status**: 스위치가 포트 상태의 변경을 컨트롤러에 알리는 데 사용된다.
- **Packet-in**: 플로우 테이블과 일치하지 않는 패킷 또는 '컨트롤러로 전송'이 액션으로 지정된 패킷을 컨트롤러로 보내는 데 사용된다.

# SDN 제어 스위치와 SDN 컨트롤러 상호작용 예시
![[SDN_controller_example.png]]
- 다익스트라 알고리즘은 패킷 스위치 외부의 **별도 애플리케이션으로 실행**된다.
- 패킷 스위치는 링크 업데이트를 서로에게 전송하는 것이 아니라 **SDN 컨트롤러에 전송**한다.
### 가정
- 이 예시에서는 s1과 s2 사이의 링크에 장애가 발생했다고 가정한다.최단 경로 라우팅이 구현되어 있으므로, s1, s3, s4의 수신 및 발신 흐름 전달 규칙은 영향을 받지만 s2의 동작은 변경되지 않는다고 가정한다. 또한 OpenFlow가 통신 계층 프로토콜로 사용되며, 컨트롤 플레인은 링크 상태 라우팅 외에 다른 기능은 수행하지 않는다고 가정한다.