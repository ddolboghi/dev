TCP Splitting은 사용자와 데이터센터 간의 거리가 멀어 응답 시간이 길어지는 문제를 해결하기 위한 기술이다. 클라우드 서비스의 응답성을 높여, 마치 사용자의 기기 내에서 서비스가 실행되는 것과 같은 사용자 경험을 제공하는 것을 목표로 한다.
# 문제점: TCP 연결 지연
일반적인 TCP 연결에서는 다음과 같은 지연 요소들이 발생하여 사용자 경험을 저해한다.
- **긴 왕복 시간 (RTT)**: 사용자가 데이터센터와 지리적으로 멀리 떨어져 있을수록 패킷이 오가는 데 걸리는 시간(RTT)이 길어진다.
- **TCP 느린 시작 (Slow Start)**: TCP 연결 초기에는 `slow start` 단계 때문에 서버가 응답 데이터를 보내기 위해 여러 번의 RTT가 필요하다(연결 설정을 위한 RTT 1번, 데이터 전송을 위한 RTT 3번). 이로 인해 전체 응답 시간은 대략 `4 * RTT + 처리 시간`이 되어 눈에 띄는 지연이 발생할 수 있다.
- **패킷 손실:** 특히 사용자의 접속 네트워크(access network)에서 패킷 손실이 발생하면, TCP 재전송으로 인해 지연 시간이 더욱 길어진다.
# 해결 방안: TCP Splitting의 원리
TCP Splitting은 하나의 종단 간(end-to-end) TCP 연결을 두 개의 독립적인 연결로 분리하여 지연을 줄인다.

1. **프론트엔드 서버 배치**: 사용자에게 지리적으로 가까운 위치에 "프론트엔드 서버"를 배치한다.
2. **연결 분리 (Splitting)**:
    - **연결 1:** 클라이언트(사용자)는 가까운 **프론트엔드 서버**와 TCP 연결을 맺는다. 이 연결은 거리가 가깝기 때문에 RTT(RTT_FE)가 매우 짧다.
    - **연결 2:** 프론트엔드 서버는 원격 데이터센터(백엔드 서버)와 매우 큰 혼잡 윈도우(congestion window)를 가진 **영구적인(persistent) TCP 연결**을 유지한다.
### 성능 향상 효과

이 구조를 통해 전체 응답 시간은

`4 * RTT_FE + RTT_BE + 처리 시간`으로 근사할 수 있습니다. (여기서 RTT_BE는 프론트엔드와 백엔드 서버 간의 RTT입니다.)

- 프론트엔드 서버가 사용자와 매우 가깝기 때문에 RTT_FE는 무시할 수 있을 정도로 작습니다.
    
- RTT_BE는 기존의 전체 RTT와 거의 같습니다.
    
- 결과적으로, 네트워크 지연 시간이 기존의 약
    
    **4 * RTT**에서 **1 * RTT**로 크게 줄어듭니다.
    

이러한 지연 시간 감소는 특히 데이터센터에서 멀리 떨어진 사용자의 체감 성능을 크게 향상시킵니다. 또한, 접속 네트워크에서 발생하는 패킷 손실로 인한 재전송 지연도 줄이는 데 도움이 됩니다. Google과 Akamai 같은 기업들은 자신들의 CDN(Content Delivery Network) 서버를 이용해 TCP Splitting 기술을 광범위하게 활용하고 있습니다.