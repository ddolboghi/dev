> [!NOTE]
    > 이 챕터에서는 단방향 데이터 전송만 고려한다.
# 서비스 모델과 구현
![[reliable_data_transfer_service_model_and_implementation.png]]
TCP는 상위 계층에 데이터 손상/손실 없이 전송된 순서대로 전달하는, 추상화된 서비스 모델을 제공한다.
TCP는 신뢰할 수 없는 IP 네트워크 계층 위에서 구현되며, 신뢰성있는 데이터 전송 프로토콜을 구현한다.
### 프로토콜 인터페이스
- 송신측에서는 `rdt_send()` 호출을 통해 상위 계층으로부터 데이터를 받는다.
- 수신측에서는 `rdt_rcv()`가 채널로부터 패킷이 도착했을 때 호출된다.
- `rdt` 프로토콜이 상위 계층으로 데이터를 전달하고자 할 때는 `deliver_data()`를 호출한다.
- `rdt`의 송신측과 수신측은 모두 `udt_send()` 호출을 통해 상대방에게 패킷을 보낸다. 여기서 `udt`는 신뢰할 수 없는 데이터 전송(unreliable data trasfer)을 의미한다.
- 송신측과 수신측은 확인응답(ACK)과 같은 제어 정보가 든 패킷을 양방향으로 전송하며 교환한다.
# 신뢰성 있는 데이터 전송 프로토콜 구축
신뢰성 있는 데이터 전송 프로토콜은 비트 오류와 패킷 손실이라는 두 가지 주요 문제를 해결해야 한다.
- **비트 오류**는 **체크섬**으로 감지하고, **ACK(긍정 확인응답)**, **NAK(부정 확인응답)**, **sequence number(순서 번호)** 를 통해 복구한다. 송신자는 NAK를 받거나 손상된 ACK/NAK를 받으면 패킷을 재전송한다.
- **패킷 손실**은 송신측의 **카운트다운 타이머**로 감지한다. 정해진 시간 내에 ACK가 도착하지 않으면, 송신자는 패킷이 손실된 것으로 간주하고 재전송한다.
- 이러한 기능을 결합하면 송신자가 패킷 하나를 보내고 ACK를 받을 때까지 기다리는 **정지-대기(stop-and-wait)** 방식의 신뢰성 있는 프로토콜이 된다.
# rdt1.0: 완벽하게 신뢰성 있는 채널을 통한 데이터 전송
하위 채널이 완벽하게 신뢰성 있다고 가정한다.
### 송신측
1. 상위 계층으로부터 데이터를 받는다.
2. 데이터를 포함하는 패킷을 생성한다.
3. 채널로 패킷을 전송한다.
### 수신측
1. 하위 채널로부터 패킷을 받는다.
2. 패킷에서 데이터를 추출한다.
3. 상위 계층으로 패킷을 전달한다.
4. 


Chapter 3.4.2
Chapter 3.4.3
Chapter 3.4.4