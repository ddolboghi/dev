---
chapter: "1"
---
# 인터넷이란?
## 인터넷의 구성요소
- 인터넷에 연결된 장치를 host 또는 end system이라고 부른다.
- 호스트는 통신 링크와 패킷 스위치의 네트워크로 연결된다.
- 통신 링크는 동축 케이블, 구리선, 광케이블, 라디오 스펙트럼 등의 물리 매체로 구성된다.
- 각 링크마다 다양한 전송률(bps, bit per second)로 데이터를 전송한다.
- 송신 호스트는 데이터를 세그먼트로 나누고 헤더를 붙여 패킷으로 만들어 수신 호스트로 보내면, 수신 호스트는 패킷을 재조립한다.
- 패킷 교환기(또는 스위치)는 입력 통신 링크의 하나로 도착하는 패킷을 받아서 출력 통신 링크의 하나로 그 패킷을 전달한다.
- 패킷 교환기로는 라우터와 링크 계층 스위치가 가장 많이 사용된다.
- 패킷이 송신 호스트에서 수신 호스트에 도달하는 동안 거쳐온 통신 링크와 패킷 스위치를 네트워크 상의 경로(route, path)라고 한다.
- 호스트는 ISP(Internet Service Provider)를 통해 인터넷에 접속한다.
- ISP는 계층별로 연결되며, 국가(국제) 상위 계층 ISP들은 광 링크로 직접 연결된다.
- 각 ISP 계층마다 네트워크는 따로 관리되고, IP 프로토콜을 수행하며 네이밍과 주소배정 방식을 따른다.

## 네트워크의 서비스적 개념
- 인터넷에 연결된 엔드 시스템의 프로그램은 다른 엔드 시스템에서 실행 중인 프로그램에 데이터를 전달하도록 요청하는 방법을 지정하는 **socket interface**를 제공한다.
- internet socket interface는 인터넷이 대상 프로그램에 데이터를 전달할 수 있도록 전송 프로그램이 따라야 하는 일련의 규칙이다.
- internet socket interface는 우편 시스템과 유사하다.
	1. 편지를 쓴다 == 데이터를 넣는다.
	2. 수신인, 주소, 봉투를 닫는다. == 정해진 형식에 맞게 데이터를 포장한다.
	3. 우편함에 넣는다. == 통신 체계에 맞게 데이터를 보낸다.
## Protocol
- 인터넷에서 두 개 이상의 원격 개체가 통신하는 모든 활동은 프로토콜이 적용된다.
- 프로토콜은 둘 이상의 통신 개체 간에 교환되는 메시지 포맷과 순서뿐만 아니라, 메시지의 송수신과 다른 이벤트에 따른 행동들을 정의한다.
# Network edge
- 엔드 시스템은 데스크톱 컴퓨터, 서버, 스마트폰 같은 이동 컴퓨터 등을 포함한다.
- 데이터센터의 호스트를 blade라고 한다. 이 host들은 rack에 쌓여있고 각각의 rack은 20~40개의 blade를 가진다. rack들은 데이터센터 네트워크 설계를 사용해 상호 연결된다.
- 호스트는 종종 client와 server로 구분된다.
# Access network
- access network는 엔드 시스템에서 다른 엔드 시스템으로 가는 경로에서 _엔드 시스템을 첫 번째 라우터(edge router)에 물리적으로 연결하는 네트워크_ 다.
- 가장 널리 사용되는 광대역 주거용 엑세스는 digital subscriber line(DSL)과 케이블이다.
## DSL
- 집은 통신사로부터 DSL 인터넷 액세스를 얻는다.
- 이때 통신사는 ISP(Internet Service Provider)가 된다.
- 집의 DSL 모뎀은 전화선을 사용해 데이터를 교환한다. 
- 집에서 아날로그 신호를 고주파로 통신사의 지역 중앙 사무실로 보내면 DSLAM(Digital Subscriber Line Access Multiplexer)이 디지털 신호로 변환한다.
- DSLAM은 데이터와 전화 신호를 분리해서 데이터를 인터넷으로 보낸다.
- 수백~수천 개의 집이 하나의 DSLAM과 연결되어있다.
- DLS 표준 downstream, upstream 속도는 다양하게 정의되어있다.
- downstream, upstream속도가 달라 엑세스가 비대칭적이다.
- 최대 속도는 통신사 사무실 간의 거리, twisted-pair line의 게이지 및 전기 간섭에 따라 제한된다.
## cable internet access
- 케이블 인터넷 액세스는 케이블 텔레비전 회사의 기존 케이블 텔레비전 인프라를 활용한다.
- 컴퓨터와 ethernet 포트로 연결된 케이블 모뎀이 필요하다.
- 케이블 모뎀은 HFC 네트워크를 downstream과 upstream 채널로 나눈다.
- CMTS(Cable Modem Termination System)은 케이블 모뎀으로부터 받은 아날로그 신호를 디지털로 변환한다.
- CMTS는 DSL 처럼 upstream과 downstream 속도가 다르며, 보통 downstream 속도가 더빠르다.
- CMTS는 DSL 처럼 계약한 속도나 최고 속도로 사용하지 못할 수도 있다.
- **케이블 인터넷 엑세스는 broadcast 매체이므로 공유되어있다.** 
	- 여러 downstream 채널이 동시에 큰 데이터를 받으면 각 채널의 속도는 총 케이블 downstream 속도보다 매우 낮아진다.
- upstream 채널도 공유되므로 전송을 조정하고 충돌을 피하기 위해 분산 다중 액세스 프로토콜이 필요하다.
## Fiber To The Home(FTTP)
- 통신사 지역 중앙 사무소에서 각각의 집으로 광케이블을 직접 연결한다.
- 인터넷 접근 속도가 GB/S 단위다.
## ethernet과 wifi
- LAN(Local Area Network)은 엔드 시스템을 엣지 라우터에 연결하는 데 사용된다.
- ethernet은 가장 널리 사용되는 LAN 기술이다.
- ethernet은 ethernet switch에 연결하기 위해 꼬임쌍선을 이용한다.
## 물리 매체
- 비트(데이터)는 라우터를 통해 이동한다.
- 각 송신기-수신기 라우터 쌍에 대해 비트는 전자기파 또는 광학 펄스 형태로 물리적 매체를 통해 전송된다.
- 유도 매체: 광섬유 케이블, 트위스트 페어 구리선 또는 동축 케이블과 같은 고체 매체를 따라 파형을 유도한다. 
- 비유도 매체: 무선 LAN 또는 디지털 위성 채널의 경우 처럼 대기와 야외 공간으로 파형을 전파한다.

| 유도 매체            |                                                                                                                          |
| ---------------- | ------------------------------------------------------------------------------------------------------------------------ |
| Twisted-Pair 구리선 | 가장 싸고 많이 사용된다.                                                                                                           |
| 동축(coaxial) 케이블  | - 구리선이 평행이 아닌 동심원 모양이다.<br>- 유도 공유 매체다.<br>- 여러 개의 엔드 시스템을 케이블에 직접 연결할 수 있다.<br>- 각 엔드 시스템은 다른 엔드 시스템에서 전송되는 모든 것을 수신한다. |
| 광섬유              | - 매우 빠른 비트 전송률<br>- 전자기 간섭에 영향을 받지 않는다.<br>- 최대 100킬로미터까지 신호 감쇠가 매우 낮다.<br>- 도청하기 매우 어렵다.<br>- 비싸다.                      |

| 비유도매체      |                                                                                         |
| ---------- | --------------------------------------------------------------------------------------- |
| 지상파 라디오 채널 | - 환경적 요소에 영향을 많이 받는다.<br>- 무선 LAN 기술은 근거리 무선 채널을 사용한다.<br>- 셀룰러 액세스 기술은 광역 무선 채널을 사용한다. |
| 위성 라디오 채널  | - 정지궤도 위성과 저궤도 위성으로 통신한다.<br>- 신호 지연이 크다.                                               |
# Network core
- 네트워크 코어는 인터넷의 최종 시스템을 상호 연결하는 패킷 스위치와 링크의 메쉬다.
- 링크와 스위치 네트워크를 통해 데이터를 이동시킬때 **circuit switching**과 **packet switching**이라는 두 가지 기본 접근 방식이 있다.
## Packet switching
- 각 패킷은 통신 링크와 패킷 스위치를 통해 이동한다.
- 패킷 스위치에는 **라우터**와 **링크 레이어 스위치**의 두 가지 주요 유형이 있다.
- 패킷은 각 통신 링크를 통해 링크의 전체 전송 속도와 동일한 속도로 전송된다.
- 패킷 스위치에는 여러 개의 링크가 연결되어 있다.
- source end system 또는 패킷 스위치가 전송 속도 R bit/sec의 링크를 통해 L bit 패킷을 전송하는 경우, 패킷 전송 시간은 L/R sec다.
	${패킷 크기}\div{패킷 스위치 전송 속도}={패킷 전송 시간}$
- packet switching은 링크를 통해 다른 패킷을 동시에 전송해야 하기 때문에 링크 중 하나가 혼잡한 경우 패킷은 버퍼에서 대기해야 하며 지연이 발생한다.
### Store-and-Forward Transmission
- 대부분의 패킷 스위치는 저장-후-전달 전송 방식을 사용한다.
- 패킷 스위치(라우터)는 **한 패킷의 모든 비트를 수신한 후에만 출력 링크로 그 패킷을 전송**하기 시작한다. 즉, 라우터는 패킷의 모든 비트를 **수신**, **저장**, **처리**한 뒤에 출력 링크로 전송할 수 있다.
	![[packet_switching1.png]]
	
- 링크는 end system과 패킷 스위치, 패킷 스위치와 패킷 스위치사이의 경로다.
- n개의 링크가 있으면 n-1개의 라우터가 있다.
- end system 또는 패킷 스위치가 R bit/sec 의 속도로 링크에서 L비트의 패킷을 보낸다면, 그 패킷을 전송하는데 걸리는 시간은 $\frac{L}{R}$ 초다.
- 전파 지연이 없고, 출발지와 목적지 사이에 n개의 링크가 있을때 패킷 1개의 전송 시간은 $n\frac{L}{R}$이다.
### 대기열 지연과 패킷 손실 (at store-and-forward transmission)
- 패킷 스위치는 연결된 링크마다 output buffer(output queue)를 가진다.
- output buffer에 해당 링크로 보내려는 패킷을 저장한다.
- 다른 패킷을 전송하는데 링크가 사용되고 있다면 패킷은 output buffer에서 대기한다. 그래서 패킷은 store-and-forward 지연뿐만 아니라, **output buffer에서 queuing 지연**도 겪는다.
- queuing 지연은 가변적이고 네트워크 혼잡도에 영향을 받는다.
- **buffer 공간이 가득 차면** 해당 buffer에 도착한 패킷 또는 대기 중인 패킷 중 하나가 삭제되어 **패킷 손실**이 발생한다.
- 라우터에 도착하는 패킷의 전송률이 라우터의 송신률보다 크면 output buffer에서 queuing 지연이 발생한다.
### Forwarding Tables and Routing Protocols
- 라우터가 패킷이 가야할 링크를 정해주는 것을 패킷 포워딩이라고 한다.
- 각 라우터에는 목적지 주소(또는 일부)를 해당 라우터의 출력 링크로 매핑하는 forwarding table이 있다.
- 인터넷의 여러 **routing protocol로 forwarding table을 자동으로 설정**한다.
	- 예를 들어, routing protocol은 라우터에서 목적지까지 최단 경로를 결정하고 이 결과를 forwarding table을 구성하는데 사용한다.
- 패킷이 라우터를 통해 목적지에 도달하는 과정은 지도 없이 사람들에게 물어가면서 목적지에 도착하려는 운전자와 유사하다.
	- 운전자 == 패킷
	- 래우터 == 묻는 사람
	- 사람들은 전체 경로의 일부 중 당장 가야할 가까운 경로를 알려준다.
1. 출발지 end system이 목적지 end system으로 패킷을 보낼때  목적지의 IP 주소를 패킷 헤더에 포함시킨다.
2. 라우터는 패킷의 목적지 주소를 검사한다.
3. 라우터는 forwarding table에서 목적지 주소에 인접한 라우터로 가는 출력 링크를 찾는다.
4. 라우터는 패킷을 출력 링크로 라우팅한다.

## Circuit switching
- 회선 교환 네트워크에서는 엔드 시스템 간 통신 세션의 지속 시간 동안 경로를 따라 필요한 **자원**(버퍼, 링크 전송 속도)이 **예약**된다.
- 회선 교환 네트워크는 통신을 시작하기 전에 필요한 모든 자원이 할당된다.
- 두 호스트 간 데이터가 전송되기 전에 먼저 전용 종단 간 연결을 설정해야하고, 이러한 연결을 회로(circuit)라고 한다.
- 전송 속도가 예약되있기 때문에 보장된 **일정 속도로 데이터를 보낼 수 있다.**
- 링크가 N개면, 하나의 링크는 연결 지속 시간 동안 링크 총 전송 용량의 ${\frac{1}{N}}$을 예약한다.
![[Pasted image 20240815001131.png | 300]]
- 각 링크는 회로를 4개씩 가지고 있다.
- 각 회로는 4개의 동시 연결을 지원할 수 있다.
- 두 호스트가 연결되길 원할때 네트워크는 전용 end-to-end 연결을 설정한다.
- 각 링크에는 4개의 회로가 있으므로 링크 전송 용량의 ${\frac{1}{4}}$이 개별 end-to-end 연결에 사용된다.
	- 예를 들어 인접 스위치 간의 각 링크의 전송 속도가 1Mbps인 경우, 각 종단 간 회선 교환 연결의 전송 속도는 250kbps이다.
- circuit switching은 전용 회로가 유휴 시간 동안 유휴 상태이기 때문에 낭비가 발생한다.
- 회로를 설정하고 전송 용량을 예약하는 것이 복잡하고 경로를 따라 스위치의 작동을 조정하는 복잡한 시그널링 소프트웨어가 필요하다.
### Packet switching과의 차이점
- 회선 교환과 달리 인터넷과 같은 패킷 교환 네트워크에서는 어떤 링크 자원도 예약하지 않고 패킷이 네트워크로 전송된다.
- 만약 다른 패킷들도 동시에 해당 링크로 전송되어 링크가 혼잡하면, 패킷은 전송 링크의 송신 측 버퍼에서 기다려야 해서 지연이 발생한다.
- **인터넷은 패킷을 전달, 순서있는 전달, 데이터 무결성을 보장하지 않는다.** 이러한 이유로 IP는 신뢰할 수 없는 서비스라고 불린다.
### 회선 교환 네트워크의 다중화 방식
![[FDM and TDM.png | 500]]
- 회선 교환 네트워크에서 링크의 다중화는 주파수 분할 다중화(FDM; frequency-division multiplexing) 또는 시분할 다중화(TDM; time-division multiplexing)로 구현된다.
#### FDM
- 링크의 대역폭을 여러 주파수 대역으로 분할한다.
> [!tip]
> 주파수 대역의 폭을 대역폭(bandwidth)이라고 한다.
- 각 주파수 대역은 특정 연결에 대해 고정적으로 예약된다.
- 각 연결은 세션 지속 시간 동안 자신의 주파수 대역을 사용하여 전송한다.
#### TDM
- 고정된 기간의 프레임으로 시간을 나누고, 각 프레임은 고정된 수의 시간 슬롯으로 나뉜다.
- 네트워크가 링크를 통해 연결을 설정하면 네트워크는 매 프레임마다 하나의 시간 슬롯을 이 연결에 할당한다. 
- 이 슬롯은 해당 연결 전용으로 사용되며, 연결 데이터를 전송하는 데 사용할 수 있는 시간 슬롯이 매 프레임마다 하나씩 있다.
- 각 회로는 시간 슬롯 기간 동안 링크의 전체 대역폭을 주기적으로 사용한다.
- TDM에서 회로의 전송 속도 = 프레임 속도 X 슬롯의 비트 수
	- 프레임 전송 속도가 8000 frame/sec이고 각각의 슬롯이 8bit라면 전송 속도는 64kbps이다.
- ex) 24개의 슬롯을 가진 전송 속도 1.536 Mbps TDM 링크를 통해 호스트 A에서 호스트 B로 640,000 bits의 파일을 circuit switching으로 전송할때:
	- 전파 지연을 무시하면 전송 시간은 링크 개수와 상관없다.
	- 회로를 설정하는데 500 msec 소요
	- 각 회로의 전송 속도는 (1.536 Mbps) / 24 = 64 kbps
	- 파일 전송 속도는 (640,000 bits) / (64 kbps) + 500ms = 10.5sec

## Packet switching vs Circuit switching
사용자가 10명인데 한 사용자가 갑자기 1,000 bits 패킷 1,000개를 생성하고 다른 사용자는 대기 상태로 패킷을 생성하지 않는다고 가정해 보자. 
circuit switching은 프레임당 10개의 슬롯이 있고 각 슬롯이 1,000비트로 구성된 TDM을 사용한다.
활성 사용자는 프레임당 하나의 시간 슬롯만 사용하여 데이터를 전송할 수 있고 각 프레임의 나머지 9개 시간 슬롯은 유휴 상태로 유지된다. 
활성 사용자의 100만 bits 데이터가 모두 전송되기까지는 10초가 걸린다. 
packet switching의 경우 활성 사용자의 패킷과 다중화해야 하는 패킷을 생성하는 다른 사용자가 없기 때문에 활성 사용자는 전체 링크 속도인 1Mbps로 패킷을 계속 보낼 수 있다. 
이 경우 활성 사용자의 모든 데이터는 1초 이내에 전송된다.
즉, **circuit switching은 연결을 사용하지 않아도 자원이 유휴 상태로 남아있어 packet switching에 비해 효율성이 떨어진다.**

## 네트워크의 네트워크 : ISP간 연결
- 인터넷은 단일 통제 시스템이 아니라, 서로 연결된 수많은 개별 네트워크들로 구성되어 있다.
- 인터넷은 end system에 접속 서비스를 제공하는 다양한 ISP 네트워크들이 서로 연결되어 형성된다.
### ISP의 상호 연결
- 일반적으로 하위 계증 ISP들은 국가 및 국제적인 상위 계층 ISP를 통해 서로 연결된다.
- 상위 계층 ISP들은 서로 직접적으로 연결되어 있다.
- 상위 계층 ISP는 고속 라우터와 고속 광섬유 링크로 이루어져 있다.
- 상위 계층이든 하위 계층이든, 각 ISP 네트워크는 독립적으로 관리된다. 이들은 IP 프로토콜을 실행하고 특정 명명 및 주소 지정 규칙을 따른다.
- ISP들의 계층적 구조는 인터넷이 수천 개의 네트워크를 포함하도록 확장할 수 있게 해 주었다.
### ISP의 계층적 구조와 관계
- 하위 계층 ISP가 상위 계층 ISP에 비용을 지불하는 고객-제공자 관계가 형성된다.
- Access ISP: 사용자에게 직접 인터넷 접속을 제공하는 ISP다. 이들은 자신이 연결된 지역 ISP에게 비용을 지불한다. 때로는 직접 Tier-1 ISP에 연결할 수도 있으며, 이 경우 Tier-1 ISP에 비용을 지불한다.
- Regional ISP: 특정 지역 내의 여러 Access ISP들을 연결하고, 자신이 연결된 Tier-1 ISP에게 비용을 지불한다.
- Tier-1 ISP: 최상위 ISP로, 누구에게도 비용을 지불하지 않는다.
- 실제 네트워크는 더 복잡하다. 예를 들어, 소규모 Regional ISP들이 국가 단위의 더 큰 Regional ISP에 연결되고, 이 국가 ISP가 다시 Tier-1 ISP에 연결되는 형태도 존재한다.

# ## Packet-Switched Networks의 지연, 손실, 처리량
## Packet-Switched Networks의 지연
### Processing Delay (dproc)
- 패킷 헤더를 검사하고 패킷을 적절한 출력 링크로 전달하는데 필요한 시간이다.
- 다른 요인도 포함될 수 있다. 예: upstream 노드에서 라우터 A로 패킷 비트를 전송하는 동안 발생한 비트 수준 오류를 확인하는데 필요한 시간
- 고속 라우터의 경우 일반적으로 마이크로초 단위 이하다.
- 라우터의 **최대 처리량**에 큰 영향을 미친다.
### Queuing Delay (dqueue)
- 패킷이 전송을 기다리며 큐(버퍼)에서 보내는 시간이다.
- 링크가 현재 사용 중이거나 이미 다른 패킷들이 큐에 대기 중일 때 발생한다.
- 패킷마다 다를 수 있으며, 통계적 측정치(예: 평균 큐잉 지연, 분산)로 특성화된다.
### Transmission Delay (dtrans)
- 패킷의 모든 비트를 링크로 전송하는데 필요한 시간이다.
- 패킷 길이(L)를 링크의 전송 속도(R, bit/sec)로 나누어 계산한다.($\frac{L}{R}$)
	- 예를 들어, 1 Gbps 링크에서 1000 byte(8000 bit) 패킷을 전송하는데 8 ms가 걸린다.
- 네트워크 환경에 따라 무시할 수 있는 수준(LAN의 10 Mbps 이상)부터 수백 ms(저속 다이얼업 모뎀 링크를 통한 대형 인터넷 패킷)까지 다양하다.
### Propagation Delay (dprop)
- 비트가 링크의 시작 지점에서 목적지까지 이동하는데 걸리는 시간이다.
- 링크의 길이(=인접 라우터 사이의 거리)(d)를 전파 속도(s)로 나누어 계산한다.($\frac{d}{s}$)
- 전파 속도는 빛의 속도에 가깝다.
- 때때로 무시할 수 있지만, 단거리 링크의 경우 dnodal에서 지배적인 항이 될 수 있다.
### Transmission Delay와 propagation Delay 비교
라우터 = 톨게이트, 링크 = 고속도로 구간, 비트 = 자동차, 패킷 = 자동차 행렬이라고 한다면,
톨게이트에서 전체 행렬을 고속도로에 진입시키는 시간은 전송 지연이고,
톨게이트 간 이동 시간은 전파 지연이다.

> [!tip]
    > 총 노드 지연: dnodal = dproc + dqueue + dtrans + dprop

> [!NOTE]
    > 종단 시스템 지연, 애플리케이션 지연, 미디어 패킷화 지연 등이 발생할 수 있으며, VoIP 애플리케이션에서 패킷화 지연은 사용자 인지 품질에 영향을 미칠 수 있다.

## Queuing Delay과 패킷 손실

### 큐잉 지연의 가변성
- 큐잉 지연은 다른 세가지 지연(dproc, dtrans dprop)과 달리 패킷마다 달라질 수 있다.
- 예를 들어, 10개의 패킷이 빈 큐에 동시에 도착하면 첫 번째 패킷은 큐잉 지연이 없지만, 마지막 패킷은 다른 9개의 패킷이 전송될 때까지 기다려야 하므로 상대적으로 큰 큐잉 지연을 겪는다.
- 따라서 큐잉 지연을 특성화할때는 **평균 큐잉 지연, 큐잉 지연의 분산, 특정 값을 초과하는 큐잉 지연의 확률 같은 통계적 측정치를 사용**한다.
### 트래픽 강도(I)
- 큐잉 지연의 정도를 직관적으로 이해하는데 유용한 개념으로, $I = \frac{La}{R}$로 정의된다. 이는 비트가 큐에 도착하는 평균 속도를 비트를 전송할 수 있는 속도로 나눈 값이다.
	- $L$: 평균 패킷 길이
	- $a$: 평균 패킷 도착률
	- $R$: 비트 전송 속도
![[average_queuing_delay_graph.png]]
- 트래픽 강도가 0에 가까우면 패킷 도착이 드물고, 도착하는 패킷이 큐에서 다른 패킷을 발견할 가능성이 낮아 평균 큐잉 지연은 0에 가깝다.
- 트래픽 강도가 1에 가까워지면 패킷 도착률의 변동성으로 인해 도착률이 전송 용량을 초과하는 시간 간격이 발생하고, 이 기간 동안 큐가 형성된다.
- 도착률이 전송 용량보다 낮아지면 큐 길이가 줄어들지만, 트래픽 강도가 1에 가까워질수록 평균 큐 길이는 계속해서 길어진다.
### 패킷 손실
- 큐잉 버퍼 공간이 유한하기 때문에 패킷 손실이 발생한다.
- 도착하는 패킷이 버퍼가 다른 패킷들로 완전히 가득 찬 것을 발견하면, 도착하는 패킷이나 이미 큐에 있는 패킷 중 하나가 삭제될 수 있다.
- 호스트 A와 B가 호스트 E로 패킷을 전송하는 시나리오에서, 라우터에 대한 패킷 도착률이 링크의 전송 속도를 초과하면 **혼잡**이 발생하여 패킷이 링크의 출력 버퍼에 큐잉된다.

## 종단 간 지연
- 종단 간 지연은 패킷이 소스에서 목적지까지 이동하는 전체 경로에서 발생하는 총 지연을 의미한다.
- 출발지 호스트와 목적지 호스트 사이에 N개의 라우터들이 있고, 네트워크가 혼잡하지 않아 큐잉 지연을 무시할 수 있을때 패킷의 총 종단 간 지연 시간은 다음과 같다:
  $d_{end-end} = N(d_{proc} + d_{trans} + d_{prop})$
- 종단 시스템이 공유 매체(wifi, 케이블 모뎀)로 패킷을 전송하려고 할때, 다른 종단 시스템과 매체를 공유하기 위한 프로토콜의 일부로서 의도적으로 전송을 지연시킬 수 있다.
## 컴퓨터 네트워크의 처리량
- 처리량은 출발지에서 목적지까지 데이터를 전송하는 속도다.
- 순간 처리량과 평균 처리량을 측정할 수 있다.
### 병목 링크
- 출발지와 목적지 사이의 경로에서 여러 링크가 있을때, 가장 낮은 전송 속도를 가진 링크가 병목 링크가 되어 전체 처리량을 제한한다. 
- 링크 속도를 R이라고 했을때, 출발지와 목적지 간 처리량은 $min({R_1, R_2, ..., R_N})$이다.
- 현대 인터넷의 핵심 네트워크는 일반적으로 고속 링크이므로 혼잡이 거의 발생하지 않는다. 따라서 **처리량의 제한 요인은 주로 액세스 네트워크**다.
- 처리량은 경로상의 링크 전송 속도뿐만 아니라 다른 트래픽의 간섭에도 영향을 받는다.
	- 10개의 서버(Rs)와 10개의 클라이언트(Rc)가 네트워크 코어에 연결되어 있고, 모든 10개의 다운로드가 하나의 공통 링크 R을 통과하는 경우, 공유 링크의 속도 R이 Rs나 Rc와 비슷하다면, 각 다운로드의 처리량은 이 공유 링크에 의해 제한된다. 예를 들어, Rs = 2 Mbps, Rc = 1 Mbps, R = 5 Mbps인 경우, 공통 링크가 10개 다운로드에 균등하게 대역폭을 분할하면 각 다운로드는 500 kbps의 처리량만 얻게 된다.

# 프로토콜 계층과 그것의 서비스 모델
## Layered Architecture
- 컴퓨터 네트워크는 계층으로 나눠지며 각 계층은 그 아래 계층과 결합하여 어떤 기능, 즉 서비스를 구현한다.
- 다양한 계층의 프로토콜들을 **프로토콜 스택**이라고 한다.
- 인터넷 프로토콜 스택은 5개의 계층으로 구성된다: Physical, Link, Network, Transport, Application
### Application Layer
- 애플리케이션에 의해 생성된 메시지를 교환하기 위한 네트워크 애플리케이션과 해당 애플리케이션 프로토콜이 있는 곳이다.
- HTTP, SMTP, FTP 등이 있다.
- 이 계층의 패킷을 **메시지(message)** 라고 한다.
### Transport Layer
- 애플리케이션 계층 메시지를 애플리케이션 엔드포인트 간에 전송하는 서비스를 제공한다.
- 인터넷에는 TCP와 UDP라는 두 가지 주요 전송 계층 프로토콜이 있다.
- TCP (Transmission Control Protocol): 연결 지향 서비스, 신뢰할 수 있는 데이터 전송, 흐름 제어, 혼잡 제어를 제공한다. 긴 메시지를 세그먼트로 나눈다.
- UDP (User Datagram Protocol): 연결 없는 서비스를 제공하며, 신뢰성, 흐름 제어, 혼잡 제어를 제공하 않는 no-frills 서비스다.
### Network Layer
- **데이터그램**이라는 네트워크 계층 패킷을 한 호스트에서 다른 호스트로 이동시킨다.
- 네트워크 계층의 프로토콜은 IP (Internet Protocol)다.
- 라우터는 네트워크 계층 프로토콜을 사용하여 경로를 결정한다.


프롬프트: 
다음 chapter들의 내용을 요약하지 말고 각 chapter 별로 그대로 설명해줘. 설명 중에 참고할 Fiqure가 있다면 'Fiqure 1.18'처럼 몇번 Fiqure인지 알려줘.:
chapter 2.1.1
chapter 2.1.2
chapter 2.1.3
chapter 2.1.4