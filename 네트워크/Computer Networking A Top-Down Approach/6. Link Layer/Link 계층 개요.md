- 링크 계층 프로토콜을 실행하는 어떤 디바이스든지 node라고 부른다. 노드는 호스트, 라우터, 스위치, wifi 엑세스 포인트일 수 있다.
- 노드는 데이터그램을 링크 계층 프레임으로 캡슐화하여 링크로 전송한다.
- 네트워크 계층과 링크 계층의 관계를 여행사, 교통 수단, 여행자에 비유하자면,
	- 여행자는 출발지에서 목적지까지 가야 한다. -> 데이터그램
	- 여행사는 여행자를 출발지에서 목적지까지 가는 최적의 경로를 찾아 미리 예약한다. -> 라우팅 프로토콜
	- 운송 회사는 방식은 다르지만(e.g. 기차, 비행기, 버스), 인접한 두 지역을 직접 이어 여행자를 운반한다. -> 운송 회사 = 링크, 교통 수단 = 링크 계층 프로토콜
# 링크 계층이 제공하는 서비스
- 링크 계층은 **네트워크 계층 데이터그램을 인접 노드로 이동**시키는 기본 서비스를 제공한다.
- 세부 기능은 링크 계층 프로토콜마다 다르다.
## 세부기능
- **프레이밍(Framing)**
	- 네트워크 계층 데이터그램을 링크 계층 프레임(frame)으로 **캡슐화**한다.
	- 프레임은 네트워크 계층 데이터그램이 삽입되는 데이터 필드와 여러 헤더 필드로 구성된다.
	- 프레임의 구조는 링크 계층 프로토콜에 의해 지정된다.
- **링크 액세스**
	- **MAC**(Medium Access Control, 매체 접근 제어) 프로토콜은 프레임이 링크로 전송되는 규칙을 지정한다.
	- 여러 노드가 단일 브로드캐스트 링크를 공유하는 경우(다중 접속 문제), MAC 프로토콜은 많은 노드의 프레임 전송을 조정하는 역할을 한다.
- **신뢰성 있는 전달**
	- 전송 계층과 유사하게, **확인 응답**(acknowledgments)과 **재전송**으로 신뢰성 있는 전달 서비스를 제공한다.
	- 주로 **무선 링크**와 같이 오류율이 높은 링크에서 사용되며, 오류가 발생한 링크에서 로컬로 오류를 수정하는 것을 목표로 한다.
	- 광섬유, 동축 케이블 및 다수의 꼬임쌍선 구리 링크를 포함한 낮은 비트 오류율을 가진 링크에서는 링크 계층의 신뢰성 있는 전달이 불필요한 오버헤드로 간주될 수 있다. 이러한 이유로 많은 유선 링크 계층 프로토콜은 신뢰성 있는 전달 서비스를 제공하지 않는다.
- **비트 오류 탐지 및 수정**: 
	- 수신 노드의 링크 계층 하드웨어는 신호 감쇠 및 전자기 잡음으로 인해 비트 오류가 발생할 수 있다.
	- 오류가 있는 데이터그램을 전달할 필요가 없으므로, 많은 링크 계층 프로토콜은 이러한 비트 오류를 탐지하는 메커니즘을 제공한다.
	- 송신 노드가 프레임에 오류 탐지 비트를 포함시키고, 수신 노드가 오류 검사를 수행한다.
	- 링크 계층에서의 오류 탐지는 전송 계층과 네트워크 계층의 체크섬보다 일반적으로 더 정교하며 하드웨어로 구현된다.
	- 오류 수정은 수신 노드가 프레임에서 비트 오류가 발생했음을 탐지하며 프레임의 어느 위치에서 오류가 발생했는지 정확히 파악한다. 오류를 수정하는 것만 빼면 오류 탐지와 유사하다.
# 링크 계층이 있는 곳
- 링크 계층은 대부분 네트워크 어댑터(또는 NIC; Network Interface Controller)라고 불리는 하드웨어 칩에 구현된다.
- 링크 계층은 소프트웨어와 하드웨어가 결합된 지점이다.
![[network_adapter.png]]
- 송신 측 컨트롤러는 상위 계층에서 생성되어 메모리에 저장된 데이터그램을 가져와 링크 계층 프레임으로 캡슐화하고, 링크 액세스 프로토콜에 따라 프레임을 통신 링크로 전송한다.
- 수신 측 컨트롤러는 전체 프레임을 수신하고 네트워크 계층 데이터그램을 추출한다.
- 링크 계층의 오류 탐지는 송신 컨트롤러가 프레임 헤더에 오류 탐지 비트를 설정하고 수신 컨트롤러가 오류 탐지를 수행한다.
- 링크 계층의 소프트웨어 구성 요소가 하는 일:
	- 링크 계층 주소 지정 정보 조립 및 컨트롤러 하드웨어 동작
	- 수신 측 컨트롤러 인터럽트에 응답, 오류 조건 처리, 네트워크 계층으로 데이터그램 전달