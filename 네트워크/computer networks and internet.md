# 네트워크의 서비스적 개념
- 인터넷에 연결된 엔드 시스템의 프로그램은 다른 엔드 시스템에서 실행 중인 프로그램에 데이터를 전달하도록 요청하는 방법을 지정하는 **socket interface**를 제공한다.
- internet socket interface는 인터넷이 대상 프로그램에 데이터를 전달할 수 있도록 전송 프로그램이 따라야 하는 일련의 규칙이다.
- internet socket interface는 우편 시스템과 유사하다.
	1. 편지를 쓴다 == 데이터를 넣는다.
	2. 수신인, 주소, 봉투를 닫는다. == 정해진 형식에 맞게 데이터를 포장한다.
	3. 우편함에 넣는다. == 통신 체계에 맞게 데이터를 보낸다.
- 인터넷에서 두 개 이상의 원격 개체가 통신하는 모든 활동은 프로토콜이 적용된다.
# network edge
- **엔드 시스템은 host**라고 부른다. 왜냐하면 웹브라우저 같은 프로그램을 실행하는 주체이기 때문이다.
- 데이터센터의 host를 blade라고 한다. 이 host들은 rack에 쌓여있고 각각의 rack은 20~40개의 blade를 가진다. rack들은 데이터센터 네트워크 설계를 사용해 상호 연결된다.
- host는 client와 server로 나눠질 수 있다.
# access network
- access network는 엔드 시스템에서 다른 엔드 시스템으로 가는 경로에서 _엔드 시스템을 첫 번째 라우터(edge router)에 물리적으로 연결하는 네트워크_ 다.
- 가장 널리 사용되는 광대역 주거용 엑세스는 digital subscriber line(DSL)과 케이블이다.
## DSL
- 집은 통신사로부터 DSL 인터넷 액세스를 얻는다.
- 이때 통신사는 ISP(Internet Service Provider)가 된다.
- 집의 DSL 모뎀은 전화선을 사용해 데이터를 교환한다. 
- 집에서 아날로그 신호를 고주파로 통신사의 지역 중앙 사무실로 보내면 DSLAM(Digital Subscriber Line Access Multiplexer)이 디지털 신호로 변환한다.
- DSLAM은 데이터와 전화 신호를 분리해서 데이터를 인터넷으로 보낸다.
- 수백~수천 개의 집이 하나의 DSLAM과 연결되어있다.
- DLS 표준 downstream, upstream 속도는 다양하게 정의되어있다.
- downstream, upstream속도가 달라 엑세스가 비대칭적이다.
- 최대 속도는 통신사 사무실 간의 거리, twisted-pair line의 게이지 및 전기 간섭에 따라 제한된다.
## cable internet access
- 케이블 인터넷 액세스는 케이블 텔레비전 회사의 기존 케이블 텔레비전 인프라를 활용한다.
- 컴퓨터와 ethernet 포트로 연결된 케이블 모뎀이 필요하다.
- 케이블 모뎀은 HFC 네트워크를 downstream과 upstream 채널로 나눈다.
- CMTS(Cable Modem Termination System)은 케이블 모뎀으로부터 받은 아날로그 신호를 디지털로 변환한다.
- CMTS는 DSL 처럼 upstream과 downstream 속도가 다르며, 보통 downstream 속도가 더빠르다.
- CMTS는 DSL 처럼 계약한 속도나 최고 속도로 사용하지 못할 수도 있다.
- **케이블 인터넷 엑세스는 broadcast 매체이므로 공유되있다.** 
	- 여러 downstream 채널이 동시에 큰 데이터를 받으면 각 채널의 속도는 총 케이블 downstream 속도보다 매우 낮아진다.
- upstream 채널도 공유되므로 전송을 조정하고 충돌을 피하기 위해 분산 다중 액세스 프로토콜이 필요하다.
## Fiber To The Home(FTTP)
- 통신사 지역 중앙 사무소에서 각각의 집으로 광케이블을 직접 연결한다.
- 인터넷 접근 속도가 GB/S 단위다.
## ethernet과 wifi
- LAN(Local Area Network)은 엔드 시스템을 엣지 라우터에 연결하는 데 사용된다.
- ethernet은 가장 널리 사용되는 LAN 기술의 일종이다.
## 물리적 매체
- 비트(데이터)는 라우터를 통해 이동한다.
- 각 송신기-수신기 라우터 쌍에 대해 비트는 전자기파 또는 광학 펄스 형태로 물리적 매체를 통해 전송된다.
- 물리적 미디어는 유도 매체와 비유도 매체의 두 가지 범주로 나뉜다. 
	- 유도 매체에서는 광섬유 케이블, 트위스트 페어 구리선 또는 동축 케이블과 같은 고체 매체를 따라 파동이 유도된다. 
	- 비유도 매체를 사용하면 무선 LAN 또는 디지털 위성 채널과 같이 대기 및 우주 공간에서 전파가 전파된다.

| 유도 매체            |                                                                                                                          |
| ---------------- | ------------------------------------------------------------------------------------------------------------------------ |
| Twisted-Pair 구리선 | 가장 싸고 많이 사용된다.                                                                                                           |
| 동축(coaxial) 케이블  | - 구리선이 평행이 아닌 동심원 모양이다.<br>- 유도 공유 매체다.<br>- 여러 개의 엔드 시스템을 케이블에 직접 연결할 수 있다.<br>- 각 엔드 시스템은 다른 엔드 시스템에서 전송되는 모든 것을 수신한다. |
| 광섬유              | - 매우 빠른 비트 전송률<br>- 전자기 간섭에 영향을 받지 않는다.<br>- 최대 100킬로미터까지 신호 감쇠가 매우 낮다.<br>- 도청하기 매우 어렵다.<br>- 비싸다.                      |

| 비유도매체      |                                                                                         |
| ---------- | --------------------------------------------------------------------------------------- |
| 지상파 라디오 채널 | - 환경적 요소에 영향을 많이 받는다.<br>- 무선 LAN 기술은 근거리 무선 채널을 사용한다.<br>- 셀룰러 액세스 기술은 광역 무선 채널을 사용한다. |
| 위성 라디오 채널  | - 정지궤도 위성과 저궤도 위성으로 통신한다.<br>- 신호 지연이 크다.                                               |
# network core
- 네트워크 코어는 인터넷의 최종 시스템을 상호 연결하는 패킷 스위치와 링크의 메쉬다.
- 링크와 스위치 네트워크를 통해 데이터를 이동시킬때 circuit switching과 packet switching이라는 두 가지 기본 접근 방식이 있다.
## packet switching
- 각 패킷은 통신 링크와 패킷 스위치를 통해 이동한다.
- 패킷 스위치에는 **라우터**와 **링크 레이어 스위치**의 두 가지 주요 유형이 있다.
- 패킷은 각 통신 링크를 통해 링크의 전체 전송 속도와 동일한 속도로 전송된다.
- 패킷 스위치에는 여러 개의 링크가 연결되어 있다.
- source end system 또는 패킷 스위치가 전송 속도 R bit/sec의 링크를 통해 L bit 패킷을 전송하는 경우, 패킷 전송 시간은 L/R sec다.
	${패킷 크기}\div{패킷 스위치 전송 속도}={패킷 전송 시간}$
### Store-and-Forward Transmission
- 대부분의 패킷 스위치가 링크 입력에 사용한다.
- 패킷 스위치는 **패킷의 첫 번째 비트를 아웃바운드 링크로 전송하기 전에 전체 패킷을 수신**해야 합니다.
- 라우터는 일반적으로 들어오는 패킷을 나가는 링크로 전환하는 역할을 하기 때문에 많은 링크가 있다.
- 라우터는 패킷의 모든 비트를 **받아** **저장**하고 **처리**한 뒤에 아웃바운드 링크로 전송할 수 있다.
	![[store-and-forward packet switching]]
- Link는 end system과 packet switch, pecket switch와 pecket switch사이의 경로다.
- n개의 Link가 있으면 n-1개의 라우터가 있다.
- 전파 지연이 없고, source와 detination 사이에 n개의 링크가 있을때 패킷 1개의 전송 시간은 $n\frac{L}{R}$이다.
### 대기열 지연과 패킷 손실 (at store-and-forward transmission)
- 패킷 스위치는 연결된 링크마다 output buffer(output queue)를 가진다.
- output buffer에 해당 링크로 보내려는 패킷을 저장한다.
- 다른 패킷을 전송하는데 링크가 사용되고 있다면 패킷은 output buffer에서 대기한다.
- 패킷은 store-and-forward 지연에 output buffer 큐 지연도 겪는다.
- 큐 지연은 네트워크 혼잡도에 영향 받는다.
- **buffer 공간이 가득 차면** 해당 buffer에 도착한 패킷 또는 대기 중인 패킷 중 하나가 삭제되어 **패킷 손실**이 발생한다.
### Forwarding Tables and Routing Protocols
- 라우터가 패킷이 가야할 링크를 정해주는 것을 패킷 포워딩이라고 한다.
- 각 라우터에는 destination 주소(또는 일부)를 해당 라우터의 아웃바운드 링크에 매핑하는 forwarding table이 있다.
- 패킷이 라우터를 통해 dostination end system에 도달하는 과정은 지도 없이 사람들에게 물어가면서 목적지에 도착하려는 운전자와 유사하다.
	- 운전자 == 패킷
	- 래우터 == 묻는 사람
	- 사람들은 전체 경로의 일부 중 당장 가야할 가까운 경로를 알려준다.
1. source end system이 destination end system으로 패킷을 보낼때  destination의 IP 주소를 패킷 헤더에 포함시킨다.
2. 라우터는 패킷의 destination 주소를 검사한다.
3. 라우터는 forwarding table에서 dostination 주소에 인접한 라우터로 가는 아웃바운드 링크를 찾는다.
4. 라우터는 패킷을 아웃바운드 링크로 라우팅한다.
-  인터넷의 여러 특수 **routing protocol**로 forwarding table을 자동으로 설정한다.
- routing protocol은 라우터에서 목적지까지 가장 짧은 경로를 결정하고 이 경로를 forwarding table을 구성하는데 사용한다.
## circuit switching
- circuit-switched 네트워크에서는 엔드 시스템 간의 통신을 제공하기 위해 경로(버퍼, 링크 전송 속도)를 따라 필요한 리소스가 엔드 시스템 간의 통신 세션 기간 동안 예약되어 있습니다.