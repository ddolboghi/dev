---
aliases:
  - TCP/IP
---
# TCP/IP 프로토콜 스택
TCP와 IP는 별도 계층에서 동작하는 프로토콜이지만 대부분 함께 사용합니다.
이런 프로토콜 묶음을 프로토콜 스택이라고 부릅니다.

TCP/IP 프로토콜 스택은 총 4개 부분으로 나뉩니다.
![[tcpip_protocol_stack | 500]]
## Physical 계층
- Physical 계층은 들어온 전기 신호를 그대로 잘 전달하는 것이 목적입니다.
- 1계층 장비는 주소의 개념이 없으므로 전기 신호가 들어온 포트를 제외하고 모든 포트에 같은 전기 신호를 전송합니다.
## Data Link 계층
- 전기 신호를 모아 우리가 알아볼 수 있는 데이터 형태로 처리합니다.
- 주소 정보를 정의하고 정확한 주소로 통신되도록 합니다.
- 이더넷 기반 네트워크의 2계층에서는 에러를 탐지하는 역할만 수행합니다.
- 받는 사람이 현재 데이터를 받을 수 있는지 확인하는 작업인 flow control을 합니다.
- 2계층 장비로는 네트워크 인터페이스 카드(NIC)와 스위치가 있습니다.
- NIC에는 고유 MAC 주소가 있습니다.
- NIC는 데이터에서 도착지 MAC 주소를 확인 후 자신에게 들어오는 전기 신호가 아니면 버리고, 맞으면 메모리에 적재합니다.
- 스위치는 MAC 주소 테이블을 보고 정확한 포트로 포워딩해줍니다.
- 스위치의 적절한 필터링과 포워딩 기능으로 통신이 필요한 포트만 사용하고 네트워크 전체에 불필요한 처리가 감소하면서 이더넷 네트워크 효율성이 크게 향상되었습니다.
## Network 계층
- IP 주소같은 논리적인 주소가 정의됩니다.
- IP 주소는 사용자가 환경에 맞게 변경 가능합니다.
- 3계층 장비인 라우터는 IP 주소를 사용해 최적의 경로를 찾아주고 해당 경로로 패킷을 전송합니다.
## Transport 계층
- 데이터들이 정상적으로 잘 보내지도록 확인합니다.
### 패킷 네트워크
- 패킷 네트워크는 데이터를 분할해 패킷에 실어보내다 보니 중간에 패킷이 유실되거나 순서가 바뀔수 있습니다.
- 4계층에서 패킷을 분할할때 패킷 헤더에 보내는 순서(**Suence Number**)와 받는 순서(**ACKnowledgement Number**)를 적어 통신하므로 패킷이 유실되면 재전송을 요청할 수 있고, 순서도 바로잡을 수 있습니다.
- **Port Number**를 사용해 상위 애플리케이션을 구분합니다.
- 4계층 장비는 로드 밸런서와 방화벽이 있습니다.