> [!NOTE]
> 구현을 먼저 알고 개념 수준인 OSI 7 layer를 알아야한다.

![[img/네트워크 기본]]
- DoD는 미방위성이 정한 네트워크 구조
- Access 식별자는 MAC 주소
- Network 식별자는 IP 주소
- Transport 식별자는 Port 번호 
- Application의 구현은 응용프로그램이다.
- kernel의 구성요소는 파일 형태로 application에 추상화된다.
- kernel의 구성요소 중 network와 관련된 것들의 추상화된 파일은 Socket이다.
- TCP/IP Socket은 user mode application process가 TCP에 접근할 수 있도록 파일 형태로 추상화한 인터페이스가 속한 것이다.
# MAC 주소, IP 주소, Port 번호가 식별하는 것
## MAC 주소
- NIC(LAN 카드)의 식별값이다.
- NIC 하나 당 한 개의 MAC 주소를 가진다.
- 칩을 바꾸지 않고 **변경 가능하다.**
## IP 주소
- Host(인터넷에 연결된 컴퓨터)의 식별자다.
- 하나의 컴퓨터는 여러 IP 주소를 가질 수 있다.
- NIC에 N개의 IP 주소를 바인딩할 수 있다.
## Port 번호
- user mode는 Process로 인식한다.
- kenel은 Service로 인식한다.
- H/W는 인터페이스 번호로 인식한다.
# IPv4 주소 체계
- IP(Internet Protocol)
- IPv4는 32bit 주소 체계(길이)
	- IP v4 주소는 약 43억개($2^{32}$)
- IPv6는 128bit 주소 체계(길이)
- IPv4 주소는 8bit 씩 끊어서 표시한다.
- 192.168.60.14에서 192를 이진수로 변환하면 $1100 0000_{(2)}$ -> c 0
- network id와 host id는 IPv4의 클래스에 따라 다르다.
- net mask(subnet mask)는 network id의 길이(bit)다.
	- host id를 0으로 반환하여 IP 주소의 network id값을 반환한다.
- IPv4와 net mask를 bit and 연산하면 network id가 나온다.
- IPv4를 192.168.60.14/24로 표기한다.
## 클래스 기반 주소
- 클래스 A: 네트워크 prefix bit = 8, 44.0.0.1에서 44는 네트워크 주소이고 0.0.1은 호스트 주소
- 클래스 B: 네트워크 prefix bit = 16, 128.16.0.2에서 128.16은 네트워크 주소이고 0.2는 호스트 주소
- 클래스 C: 네트워크 prefix bit = 24, 192.168.1.100에서 192.168.1은 네트워크 주소이고 100은 호스트 주소
### 클래스 기반 주소의 단점
- 사용하지 않는 IP주소가 낭비되므로 비효율적이다.
- 클래스마다 서브넷 마스크가 고정되있기 때문에 다른 network id를 가진 IP주소라도 같은 클래라면 결합할 수 없다. 
## CIDR
- Classless Inter-Domain Routing주소는 가변 길이 서브넷 마스킹(VLSM)을 사용해 네트워크와 호트 주소 비트간의 비율을 변경한다.
- 192.0.2.0/24는 처음 24bit 또는 192.0.2가 network id인 IPv4 CIDR 주소
### CIDR의 장점
- IP 주소 낭비 감소
	- 필요한 수의 IP 주소만 사용해 낭비를 줄일 수 있다.
	- 라우팅 테이블 항목이 줄어들고 데이터 패킷 라우팅이 단순화된다.
- 데이터를 빠르게 전송
	- 라우터에서 보다 효율적으로 IP주소를 여러 서브넷으로 구성할 수 있다.
	- CIDR을 사용하면 여러 서브넷을 만들고 통합할 수 있다. 이렇게 하면 불필요한 경로를 사용하지 않고도 데이터가 대상 주소에 도달할 수 있다.
> [!tip]
> subnet: 네트워크 내에 있는 소규모 네트워크. 라우터에 연결된 모든 디바이스는 동일한 subnet에 있고 동일한 IP 주소 prefix를 사용한다.
- VPC(Virtual Private Cloud) 생성
	- VPC는 클라우드 내에서 호스팅되는 private 디지털 공간이다.
	- VPC를 사용하면 격리되고 안전한 환경에 워크로드를 제공할 수 있다.
	- VPC는 연결된 디바이스 간에 데이터 패킷을 전송할때 CIDR을 사용한다.
- super net을 유연하게 생성
	- super net은 유사한 네트워크 접두사를 가진 서브넷의 그룹이다.
	- CIDR을 사용하면 super net을 유연하게 만들 수 있다.
			- 192.168.1/23과 192.168.0/23은 255.255.254.0이라는 subnet mask를 IP주소에 적용한다. 처음 23bit를 network id로 반환하므로 라우터는 단 하나의 라우팅 테이블 항목으로 서브넷에 있는 디바이스 간의 데이터 패킷을 관리할 수 있다.
### CIDR 작동방식
- 라우터는 클래스에 따라 IP 주소를 분류하는 대신 CIDR 접미사에 지정된 network id 및 host id를 검색한다.
- 네트워크 라우터에서 표시된 서브넷에 따라 해당하는 디바이스로 데이터 패킷을 라우팅할 수 있다.
### CIDR 블록
- 동일한 네트워크 접두사와 비트 수를 공유하는 IP 주소 모음이다.
- 블록이 클수록 더 많은 IP 주소를 가지고 접미사가 작아진다.

[참고](https://aws.amazon.com/ko/what-is/cidr/)
