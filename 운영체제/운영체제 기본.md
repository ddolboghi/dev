---
Created: 2023-10-23
---
# 운영체제란?
> [!info] 운영체제의 정의
> 사용자에게 편리한 인터페이스 환경을 제공하고 컴퓨터 시스템의 자원을 효율적으로 관리하는 소프트웨어
- 운영체제는 소프트웨어와 하드웨어의 결합 형태인 펌웨어(firmware)라고 부르기도 함
- 컴퓨터는 운영체제 없어도 작동하지만 기능에 제약이 있음
- 운영체제가 있는 기계는 다양한 응용 프로그램을 설치해 사용할 수 있고 성능향상을 위한 기능을 쉽게 추가할 수 있지만, 운영체제가 없는 기계는 그러기 어려움
- 운영체제는 사용자가 직접 자원에 접근하는 것을 막아 컴퓨터 자원을 보호함
- 사용자는 운영체제가 제공하는 사용자 인터페이스와 하드웨어 인터페이스를 이용해 자원에 접근함
# 운영체제의 구조
![컴퓨터 시스템 구조](../img/컴퓨터_시스템_구조.png)
## 커널과 인터페이스
- 커널: 프로세스 관리, 메모리 관리, 저장장치 관리 같은 핵심 기능 담당
- 인터페이스: 커널에 명령을 전달하고 실행 결과를 사용자와 응용 프로그램에 돌려줌
- 운영체제는 커널과 인터페이스를 분리 --> 같은 커널을 사용해도 다른 인터페이스를 가진 형태로 제작 가능
	- e.g. 유닉스의 기본 사용자 인터페이스는 명령어 기반의 shell이나, Mac OS도 유닉스 계열의 커널 기반임
- 커널의 핵심 기능
	- 프로세스 관리: 프로세스에 CPU를 배분하고 작업에 필요한 제반 환경 제공
	- 메모리 관리: 프로세스에 작업 공간 배치, 실제 메모리보다 큰 가상공간 제공
	- 파일 시스템 관리: 데이터를 저장하고 접근할 수 있는 인터페이스 제공
	- 입출력 관리
	- 프로세스 간 통신 관리: 공동 작업을 위한 프로세스 간 통신 환경 지원
### 시스템 호출(system call)
- 커널이 사용자나 응용 프로그램으로부터 컴퓨터 자원을 보호하기 위해 만든 인터페이스로, 시스템 자원의 사용과 연관된 함수 제공
- 컴퓨터 자원에 직접 접근하면 사용자나 응용 프로그램이 모든것을 처리해야하지만, 시스템 호출로 접근하면 커널이 작업을 전담해 요청의 결과만 받아볼 수 있음
- 운영체제는 커널이 제공하는 서비스를 시스템 호출로 제한하며, 사용자나 응용 프로그램이 커널 영역에 진입할 수 있는 유일한 수단임
> [!info] API vs SDK
> - API(Application Programming Interface): 운영체제의 API는 시스템 호출임
> - SDK(System Developer's Kit): 개발자를 위한 개발 도구 모음(e.g. Android Studio)
### 드라이버
- 커널와 하드웨어의 인터페이스
- 하드웨어의 제작자가 만든 소프트웨어이며, 커널이 실행될때 함께 실행됨
- 키보드나 마우스처럼 간단한 하드웨어의 드라이버는 커널이 제공하지만, 크고 복잡한 디바이스 드라이버는 직접 설치해줘야 함
### 커널의 구성
#### 단일형 구조(monolithic architecture) 커널
- 초창기 운영체제 구조(MS-DOS, VMS, 초기 유닉스)
- 커널의 핵심 기능을 구현하는 모듈들이 하나로 구성됨
- 장점
	- 모듈 간 통신 비용이 매우 작아 효율적인 운영 가능
- 단점
	- 디버깅 어려움
	- 상호 의존성이 높아 기능상의 작은 결함이 시스템 전체로 확산
	- 수정이 어려워 다양한 환경의 시스템에 적용하기 어려움
#### 계층형 구조(layered architecture) 커널
- 비슷한 기능을 가진 모듈을 묶어 하나의 계층으로 만듬
- 계층간 통신으로 운영체제 구현
- 오류 발생한 계층만 수정하면 되서 디버깅 쉬움
- 현대 운영체제는 대부분 계층형 구조 커널임
#### 마이크로 구조(micro architecture) 커널
- 커널의 핵심 기능 모듈은 사용자 영역에서 제공하고, 커널 영역에서 프로세스 간 통신 모듈을 통해 모듈간 정보 교환
- 커널은 메모리 관리(메모리 관리자)와 프로세스 간 동기화 서비스(동기화 모듈) 제공하며, 이들은 프로세스 간 통신 모듈로 연결됨
- 각 모듈이 독립적으로 작동하므로 하나의 모듈이 실패해도 전체 운영체제는 안 멈춤
- 많은 컴퓨터에 이식하기 쉬움 
- 커널이 가벼워 CPU 용량이 작은 시스템에도 적용 가능
- e.g. 마이크로 구조 커널을 사용하는 운영체제인 Mach는 애플의 OS X와 iOS의 커널로 사용됨
## 가상머신
- 어떤 언어로 만든 프로그램이 다른 운영체제에서 작동하지 않는 경우를 해결하기 위해 가상머신 도입
- 가상머신은 운영체제와 응용 프로그램 사이에서 작동하는 프로그램
- 가상머신을 설치하면 응용 프로그램이 모두 동일한 환경에서 작동하는 것처럼 보임
- Java는 Java Virtual Machine(JVM)으로 유닉스와 윈도우에서 동일한 코드로 작동 가능
- 한 컴퓨터에 두 종류의 운영체제를 사용하고 싶을때, 주로 사용하지 않는 운영체제는 다른 운영체제에 가상머신을 설치해 사용 가능
- 가상머신을 사용하면 호환성이 높지만, 응용 프로그램이 가상머신을 통해서만 작동해 느림
# 부팅
- 컴퓨터를 켰을때 운영체제를 메모리에 올리는 과정
1. 롬에 저장된 바이오스 실행
2. 바이오스가 CPU, 메모리, 주변장치가 제대로 작동하는지 점검
3. 이상이 없으면 하드디스크의 마스터 부트 레코드에 저장된 부트스트랩을 메모리로 가져와 실행
	- 부트스트랩: 운영체제를 메모리로 가져와 실행하는 작은 프로그램
# 가상 메모리
- 프로그램이 실행되면 해당 프로그램의 프로세스가 메모리에 적재됩니다.
- 메모리의 상위 주소에 스택 영역이 있습니다.
- 하위 주소에 힙 영역, 데이터 영역